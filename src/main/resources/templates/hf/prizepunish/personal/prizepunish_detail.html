<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:include="/hf/header">
</head>

<body>
    <tt:constant enumcode="event_type,examine,operation" />
    <div class="container">
        <section class="content-header">
            <h1>奖惩事件管理-个人</h1>
            <ol class="breadcrumb">
                <li><a th:href="@{/prizepunish/index}"><i class="fa fa-list-alt"></i>奖惩列表</a></li>
                <li class="active">奖惩详情</li>
            </ol>
        </section>
        <section class="content">
            <div class="box box-solid">
                <div class="box-header with-border">
                    <i class="fa fa-edit"></i>
                    <h3 class="box-title">详情</h3>
                    <div class="pull-right box-tools">
                        <a style="display: none;" class="btn" id="model_edit_btn" href="javascript:void(0)"><i class="fa fa-edit"></i>编辑</a>
                    </div>
                </div>
                <div id="model_view" class="box-body">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">事件类型:</label>
                            <div class="col-sm-3">
                                <p name="dictCode" class="form-control-static description"></p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">发生时间:</label>
                            <div class="col-sm-3">
                                <p name="happenTime" class="form-control-static description"></p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="content" class="col-sm-3 control-label">内容:</label>
                            <div class="col-sm-8">
                                <pre name="content" style="min-height:150px" class="form-control-static description"></pre>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="place" class="col-sm-3 control-label">地点:</label>
                            <div class="col-sm-8">
                                <p name="place" class="form-control-static description"></p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="check" class="col-sm-3 control-label">考核情况:</label>
                            <div class="col-sm-8">
                                <p name="checks" class="form-control-static description"></p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="checkPeople" class="col-sm-3 control-label">核定部门(人):</label>
                            <div class="col-sm-3">
                                <p name="checkPeople" class="form-control-static description"></p>
                            </div>
                            <label for="checkPeople" class="col-sm-2 control-label">审核人:</label>
                            <div class="col-sm-3">
                                <p name="examinePeople" class="form-control-static description"></p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="checkPeople" class="col-sm-3 control-label">操作状态:</label>
                            <div class="col-sm-3">
                                <p name="operationState" class="form-control-static description"></p>
                            </div>
                            <label for="checkPeople" class="col-sm-2 control-label">审核状态:</label>
                            <div class="col-sm-3">
                                <p name="examineState" class="form-control-static description"></p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="workContent" class="col-sm-3 control-label">附件:</label>
                            <div class="col-sm-8" name="attachments">
                            </div>
                        </div>
                    </form>
                </div>
                <div id="model_edit" style="display:none;" class="box-body">
                    <form id="model_form" class="form-horizontal edit-body" action="/prizepunish/save" method="post">
                        <input type="hidden" name="id" id="id" th:value="${id}" />
                        <div class="form-group">
                            <label class="col-sm-3 control-label"><i class="required-label fa fa-asterisk"></i>事件类型</label>
                            <div class="col-sm-3">
                                <select id="dictCode" name="dictCode" required="required" class="form-control tonto-select-constant" enumcode="event_type">
                                    <option value="">请选择</option>
                                </select>
                            </div>
                            <label class="col-sm-2 control-label"><i class="required-label fa fa-asterisk"></i>发生时间</label>
                            <div class="col-sm-3">
                                <input type="text" name="happenTime" required="required" class="form-control tonto-datepicker-date" placeholder="请选择日期" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="content" class="col-sm-3 control-label">内容</label>
                            <div class="col-sm-8">
                                <textarea name="content" class="form-control" rows="8"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="place" class="col-sm-3 control-label">地点</label>
                            <div class="col-sm-8">
                                <input type="text" name="place" class="form-control" id="place" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="check" class="col-sm-3 control-label">考核情况</label>
                            <div class="col-sm-8">
                                <input type="text" name="checks" class="form-control" id="checks" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="checkPeople" class="col-sm-3 control-label">核定部门(人)</label>
                            <div class="col-sm-8">
                                <input type="text" name="checkPeople" class="form-control" id="checkPeople" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-3 control-label">附件上传：</label>
                            <div class="col-sm-8">
                                <input type="file" name="attachmentFiles" multiple>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="submit" name="operationState" style="display: none" id="submitBtn">
                            <div class="col-sm-2 col-sm-offset-3">
                                <button type="button" value="3" onclick="submitPrze(this)" class="btn btn-primary btn-block">提交</button>
                            </div>
                            <div class="col-sm-2">
                                <button type="button" value="0" onclick="temporaryPrze(this)" class="btn btn-success btn-block">暂存</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-sm-2 col-sm-offset-5 btn-back">
                <a th:href="@{/prizepunish/index}" class="btn btn-primary btn-block">返回</a>
            </div>
        </section>
    </div>
    <div th:include="/hf/footer"></div>
</body>
<script type="text/javascript">
var options = {
    id: "model",
    name: "新增",
    url: "/prizepunish/save",
    columns: [
        { name: "dictCode", inputType: "SELECT", enum: "event_type", title: "事件类型:" },
        { name: "happenTime", inputType: "DATE", title: "发生时间:" },
        { name: "content", inputType: "TEXTAREA", title: "内容:" },
        { name: "place", inputType: "TEXT", title: "地点:" },
        { name: "checks", inputType: "TEXT", title: "考核情况:" },
        { name: "attachments", inputType: "ATTACHMENT", fileName: "attachmentFiles", title: "附件" },
        { name: "checkPeople", inputType: "TEXT", title: "核定部门(人):" },
        { name: "operationState", inputType: "SELECT", enum: "operation", title: "操作状态:" },
        { name: "examineState", inputType: "SELECT", enum: "examine", title: "审核状态:" },
        { name: "examinePeople", inputType: "TEXT", title: "审核人:" },

    ]
};


$(function() {
    id = $("#id").val();
    $.getAjax("/prizepunish/detail?id=" + id, function(data) {
        var model = new tonto.Model("model", options.columns, {});
        if (data.operationState == 0) {
            $("#model_edit_btn").show();
        }
        model.setData(data);
    });
})


function submitPrze(value) {
    $.warnAlert('<span style="color:red;">提交后无法修改，确定提交吗？</span>', function() {
        $("#submitBtn").val($(value).val());
        $('#submitBtn').click();
    })
}

function temporaryPrze(value) {
    $("#submitBtn").val($(value).val());
    $('#submitBtn').click();
}
</script>

</html>